# 宋浩元 37220232203808 5

## 5.2

|  1  |  2  |  3  |  4  |  5  |
| :-: | :-: | :-: | :-: | :-: |
|  A  |  A  |  A  |  C  |  C  |
|  6  |  7  |  8  |  9  | 10  |
|  A  |  D  |  D  |  D  |  B  |
| 11  | 12  | 13  | 14  | 15  |
|  C  |  A  |  A  |     |     |

## 5.3

（2）计算机中为什么要设置多种操作数寻址方式？

- 答：计算机设置多种操作数寻址方式是为了适应不同数据访问需求（如立即数、内存变量、寄存器数据），支持数组 / 链表等复杂结构，优化内存寻址范围与指令执行效率，平衡编程灵活性与系统性能。

（4）基址寻址和变址寻址的作用是什么？分析它们的异同点。

- 答：作用：基址寻址用于程序重定位和内存管理（如多进程地址映射），变址寻址用于数组 / 循环遍历（如动态下标访问）。异同：均通过寄存器 + 偏移量寻址，基址寄存器存固定基准地址（程序运行不变），变址寄存器存动态索引值（随操作递增 / 递减），分别适用于静态区域定位与动态数据遍历。

## 5.7

由于每当 CPU 从存储器取一个字节时，便自动完成 $(PC)+1=PC$，而取出该指令并完成，会使$ PC = PC + 1 + 1 + 1 = PC + 3$；

- (1) 当取出并完成该指令后，$PC = PC + 3 = 256 + 3 = 259$，要求转移到 $290$，那么偏移量 $D = 290 - 259 = 31 = 0000 0000 0001 1111 = 001FH$。所以相对偏移量高$8$位为$00H$，低$8$位为$1FH$，即指令第二字节机器代码为$1FH$，指令第三字节机器代码为$00H$。

- (2) 当取出并完成该指令后，$PC = PC + 3 = 128 + 3 = 131$，要求转移到$110$，那么偏移量 $D = 110 - 131 = -21 = -0000 0000 0001 0101 = (1111 1111 1110 1011)_补 = FFEBH$。所以相对偏移量高$8$位为$FFH$，低$8位为$EBH$，即指令第二字节机器代码为$EBH$，指令第三字节机器代码为$FFH$。

## 5.9

(1)“指令的操作码字段固定为$6$位”，那么可以存放 $2^{6}=64$条指令，由于计算机 A 有 $60$ 条指令，那么可以用多出来 $4$ 条指令作为扩展窗口，即$111011、111100、111101和111111$；“计算机的后续机型 B 中需要增加 32 条指令”，那么需要扩展地址字段位数为：$3$ 位 ($4 \times 2^n = 32$故 $n = 3$)；所以新的 32 条指令操作码为 $111100 000$ 到 $111111 111$。
(2)60 条指令的操作码字段为 6 位，32 条指令的操作码字段为 $(6 + 3)$位 $= 9$位，所以计算机 B 中操作码的平均长度 = 所有指令操作码字段之和 / 指令总条数 $= (60 × 6 + 32 × 9) / (60 + 32) $位 $≈ 7.04$ 位。

## 5.12

答：
(1)该指令系统最多可有多少条指令？该计算机最多有多少个通用寄存器?
指令系统的指令总条数由操作码位数决定，操作码位数为 $15 - 12 + 1 = 4$位，所以指令系统最多可有$2^{4}=16$条指令。根据表 5.20 可得寻址方式占 3 位，所以通用寄存器有$2^{3}=8$个。

(2)存储器地址寄存器 MAR 和存储器数据寄存器 MDR 至少各需要多少位？
计算机字长为 $16$ 位，转化为 $2B$，主存地址空间大小为 $128KB$，那么 $128KB / 2B = 64B = 2^{16}B$，所以存储器地址寄存器 MAR 和存储器数据寄存器 MDR 至少各需要 $16$ 位。

(3)转移指令的目标地址范围是多少？
由于主存地址空间大小为$128KB$，计算机按字编址，那么地址位数为$16$位($2^{17} / 2 = 2^{16}$)，同时计算机字长为$16$位，所以 $PC$ 和通用寄存器的位数均为 $16$ 位，相对寻址中其目标地址最小为$(PC(0000H))+(R(0000H)) = 0000H$，目标地址最大为$(PC(FFFFH))+(R(FFFFH)) = 1EFFFH$，理论上转移指令的目标地址范围为 $0000H ~ 1EFFFH$，但由于主存地址空间为$128KB$，也为$16$位，$1EFFFH$中的$1$会被舍去，所以目标地址最大必须是$16$位的最大值，即$FFFFH$，那么其真正的目标地址范围为 $0000H~FFFFH$。

(4)若操作码 0010B 表示加法操作（助记符为 add），寄存器 R4 和 R5 的编号分别为 100B 和 101B，R4 的内容为 1234H，R5 的内容为 5678H，地址 1234H 中的内容为 5678H，地址 5678H 中的内容为 1234H，则汇编语言为“add (R4),(R5)+”（逗号前为源操作数，逗号后为目的操作数）对应的机器码是什么（用十六进制表示）？该指令执行后，哪些寄存器和存储单元中的内容会改变？改变后的内容是什么？
根据图 5.34 指令各字段定义、表 5.20 和该小题题目，可得下表：
![alt text](image-23.png)
$0010 0011 0001 0101$转换为十六进制为 $2315H$，所以汇编语言为“$add (R4),(R5)+$”对应的机器码是$2315H$；
根据表 5.20$(R_{n})+1→(R_{n})$，可得该指令执行后，寄存器$R5$和存储单元$5678H$的内容会改变，改变后$R5$当中的内容$5678H$变成$5679H$，存储器$5678H$中的内容变成该加法指令计算的结果：$5678H + 1234H = 68ACH$。

## 5.13

答：
(1).因为指令长度为$16$位，且下条指令地址为$(PC)+2$，故编址单位是字节。偏移$OFFSET$为$8$位补码，范围为$-128~127$，故相对于当前条件转移指令，向后最多可跳转$127$条指令。

(2).指令中$C=0，Z=1，N=1$，故应根据$ZF$和$NE$的值来判断是否转移。当$CF-0，ZF-0，NF-1$时，需转移。已知指令中偏移量为$11100011B=E3H$，符号扩展后为$FFE3H$，左移一位(乘 2)后为$FFC6H$，故$PC$的值(即转移目标地址)为$200CH+2+FFC6H=1FD4H$。当$CF=1，Z=0，NF=0$时不转移。$PC$的值为:$200CH+2=200EH$。

(3).指令中的 C、乙和 N 应分别设置为$C-Z=1，N=0$。

(4).部件:指令寄存器(用于存放当前指令);部件 ②:移位寄存器(用于左移一位);部件:加法器(地址相加)。
